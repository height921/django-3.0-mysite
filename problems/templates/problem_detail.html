{% extends 'base.html' %}
{% load static %}
{% block title %}
    problems
{% endblock %}
{% block head %}
       <link rel="stylesheet" href="{% static 'problems/css/problem.css' %}">
{% endblock %}
{% block content %}
        <!-- 尝试引入看板娘begin -->
    <!--引入失败-->
    <!-- 尝试引入看板娘end -->
    <section class="container mt-3 mb-3">
        <!--题目详细信息begin-->
        <div class="row d-flex justify-content-center mt-4 mb-3">
            <div class="col-lg-12 col-md-6">
                <div class="main-card mb-3 card">
                    <div class="card-body">
                        <h5 class="card-title">A + B Problem</h5>
                        <div class="vertical-timeline vertical-timeline--animate vertical-timeline--one-column">
                            <div class="vertical-timeline-item vertical-timeline-element">
                                <div>
                                    <span class="vertical-timeline-element-icon bounce-in">
                                        <i class="badge badge-dot badge-dot-xl badge-success"></i>
                                    </span>
                                    <div class="vertical-timeline-element-content">
                                        <p style="position: relative;margin-left: 90px;">TimeLimit: <i>1000</i> MS <br>SpaceLimit:
                                            <i>32768</i> K</p>
                                        <span class="vertical-timeline-element-date">Limit</span>
                                    </div>
                                </div>
                            </div>
                            <div class="vertical-timeline-item vertical-timeline-element">
                                <div><span class="vertical-timeline-element-icon bounce-in"> <i
                                        class="badge badge-dot badge-dot-xl badge-warning"> </i> </span>
                                    <div class="vertical-timeline-element-content bounce-in">
                                        <p style="position: relative;margin-left: 90px;">Calculate <i>A + B</i>.</p>
                                        <span class="vertical-timeline-element-date">
                                            Problem Description
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="vertical-timeline-item vertical-timeline-element">
                                <div><span class="vertical-timeline-element-icon bounce-in"> <i
                                        class="badge badge-dot badge-dot-xl badge-danger"> </i> </span>
                                    <div class="vertical-timeline-element-content bounce-in">
                                        <p style="position: relative;margin-left: 90px;">Each line will contain two
                                            integers <i>A</i> and <i>B</i>. Process to end of
                                            file.</p>
                                        <span class="vertical-timeline-element-date">
                                            Input Description
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="vertical-timeline-item vertical-timeline-element">
                                <div><span class="vertical-timeline-element-icon bounce-in"> <i
                                        class="badge badge-dot badge-dot-xl badge-primary"> </i> </span>
                                    <div class="vertical-timeline-element-content bounce-in">
                                        <p style="position: relative;margin-left: 90px;">1 1</p>
                                        <span class="vertical-timeline-element-date">Sample Input</span>
                                    </div>
                                </div>
                            </div>
                            <div class="vertical-timeline-item vertical-timeline-element">
                                <div><span class="vertical-timeline-element-icon bounce-in"> <i
                                        class="badge badge-dot badge-dot-xl badge-success"> </i> </span>
                                    <div class="vertical-timeline-element-content bounce-in">
                                        <p style="position: relative;margin-left: 90px;">2</p>
                                        <span class="vertical-timeline-element-date">Sample Output</span>
                                    </div>
                                </div>
                            </div>
                            <div class="vertical-timeline-item vertical-timeline-element">
                                <div><span class="vertical-timeline-element-icon bounce-in"> <i
                                        class="badge badge-dot badge-dot-xl badge-dark"> </i> </span>
                                    <div class="vertical-timeline-element-content bounce-in">
                                        {% if user.is_authenticated %}
                                        <button class="vertical-timeline-element-date btn btn-sm btn-submit"
                                                data-toggle="modal" data-target="#SubmitAlert">Submit
                                        </button>
                                        {% else %}
                                            <button>
                                                <a href="{% url 'user:login' %}">请先登录</a>
                                            </button>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--题目详细信息end-->
        <!--Submit弹出框begin-->
        <!-- Modal -->
        <div class="modal fade" id="SubmitAlert" tabindex="-1" role="dialog"
             aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <!-- 表单begin -->
                    <form action="#" method="post" id="submit_form">
                        {% csrf_token %}
                        <input type="hidden" name="problem_id" value="{{ problem.problem_id }}">
                        <input type="hidden" value="{{ problem.source }}" name="source">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalCenterTitle">Put in your code</h5>
                            <!--下拉列表begin-->
                            <select name="language" id="language" class="form-control ml-4" style="width: 100px">
                                <option value="Cpp">C++</option>
                                <option value="G++">G++</option>
                                <option value="Java">Java</option>
                                <option value="C">C</option>
                            </select>
                            <!--下拉列表end-->
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <textarea name="code" id="codes" cols="30" rows="10" style="width: 100%;"></textarea>
                        </div>
                    </form>
                    <small class="error_tip" id="submit_error">提示信息</small>

                    <!-- 表单end -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="submit_btn">Submit</button>
                    </div>
                </div>
            </div>
        </div>
        <!--Submit弹出框end-->
    </section>

{% endblock %}
{% block script %}
<script type="text/javascript">
{#登录#}
$("#login_btn").click(function () {

});
    // 提交按钮
$("#submit_btn").click(function () {
    var code = $("#codes").val();
    if(code.length<50){
        $("#submit_error").html("代码太短了,最少50个字符");
        $("#submit_error").show();
    }
    else {
    $.ajax({
        cache: false,
        url: "{% url 'problem:problem_detail' problem.slug %}",
        type: "POST",
        dataType: 'json',
        data:$('#submit_form').serialize(),
        async: true,
        success: function (data) {
            if(data.status=='success'){
            alert(data.result);
            }else {
                alert("提交失败");
            }
        }
    });
    }
});
</script>
{% endblock %}